{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { createContext, useState, useEffect } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var AuthContext = createContext({\n  token: '',\n  isAuthenticated: false,\n  authenticate: function authenticate(token) {},\n  logout: function logout() {}\n});\n\nfunction AuthContextProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      authToken = _useState2[0],\n      setAuthToken = _useState2[1];\n\n  useEffect(function () {\n    function fetchToken() {\n      var storedToken;\n      return _regeneratorRuntime.async(function fetchToken$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('token'));\n\n            case 2:\n              storedToken = _context.sent;\n\n              if (storedToken) {\n                setAuthToken(storedToken);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    fetchToken();\n  }, []);\n\n  function authenticate(token) {\n    setAuthToken(token);\n    AsyncStorage.setItem('token', token);\n  }\n\n  function logout() {\n    setAuthToken(null);\n  }\n\n  var value = {\n    token: authToken,\n    isAuthenticated: !!authToken,\n    authenticate: authenticate,\n    logout: logout\n  };\n  return _jsx(AuthContext.Provider, {\n    value: value,\n    children: children\n  });\n}\n\nexport default AuthContextProvider;","map":{"version":3,"names":["AsyncStorage","createContext","useState","useEffect","AuthContext","token","isAuthenticated","authenticate","logout","AuthContextProvider","children","authToken","setAuthToken","fetchToken","getItem","storedToken","setItem","value"],"sources":["C:/Users/yaniv/Desktop/react-native-project/store/auth-context.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\n\nimport { createContext, useState,useEffect } from 'react';\n\nexport const AuthContext = createContext({\n  token: '',\n  isAuthenticated: false,\n  authenticate: (token) => {},\n  logout: () => {},\n});\n\nfunction AuthContextProvider({ children }) {\n  const [authToken, setAuthToken] = useState();\n\n  useEffect( () => {\n    async function fetchToken(){\n      const storedToken = await AsyncStorage.getItem('token');\n      if(storedToken){\n        setAuthToken(storedToken);\n      }\n    }\n    fetchToken();\n  \n  },  []);\n\n  function authenticate(token) {\n    setAuthToken(token);\n    AsyncStorage.setItem('token',token);\n  }\n\n  function logout() {\n    setAuthToken(null);\n  }\n\n  const value = {\n    token: authToken,\n    isAuthenticated: !!authToken,\n    authenticate: authenticate,\n    logout: logout,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport default AuthContextProvider;\n"],"mappings":";;AAAA,OAAOA,YAAP,MAAyB,2CAAzB;AAEA,SAASC,aAAT,EAAwBC,QAAxB,EAAiCC,SAAjC,QAAkD,OAAlD;;AAEA,OAAO,IAAMC,WAAW,GAAGH,aAAa,CAAC;EACvCI,KAAK,EAAE,EADgC;EAEvCC,eAAe,EAAE,KAFsB;EAGvCC,YAAY,EAAE,sBAACF,KAAD,EAAW,CAAE,CAHY;EAIvCG,MAAM,EAAE,kBAAM,CAAE;AAJuB,CAAD,CAAjC;;AAOP,SAASC,mBAAT,OAA2C;EAAA,IAAZC,QAAY,QAAZA,QAAY;;EACzC,gBAAkCR,QAAQ,EAA1C;EAAA;EAAA,IAAOS,SAAP;EAAA,IAAkBC,YAAlB;;EAEAT,SAAS,CAAE,YAAM;IACf,SAAeU,UAAf;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,iCAC4Bb,YAAY,CAACc,OAAb,CAAqB,OAArB,CAD5B;;YAAA;cACQC,WADR;;cAEE,IAAGA,WAAH,EAAe;gBACbH,YAAY,CAACG,WAAD,CAAZ;cACD;;YAJH;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;;IAMAF,UAAU;EAEX,CATQ,EASL,EATK,CAAT;;EAWA,SAASN,YAAT,CAAsBF,KAAtB,EAA6B;IAC3BO,YAAY,CAACP,KAAD,CAAZ;IACAL,YAAY,CAACgB,OAAb,CAAqB,OAArB,EAA6BX,KAA7B;EACD;;EAED,SAASG,MAAT,GAAkB;IAChBI,YAAY,CAAC,IAAD,CAAZ;EACD;;EAED,IAAMK,KAAK,GAAG;IACZZ,KAAK,EAAEM,SADK;IAEZL,eAAe,EAAE,CAAC,CAACK,SAFP;IAGZJ,YAAY,EAAEA,YAHF;IAIZC,MAAM,EAAEA;EAJI,CAAd;EAOA,OAAO,KAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAES,KAA7B;IAAA,UAAqCP;EAArC,EAAP;AACD;;AAED,eAAeD,mBAAf"},"metadata":{},"sourceType":"module"}